1. какие базовые цепочки и таблицы существуют в iptables и для чего служат?
 Цепочки:
  * input— пакеты для хоста
  * forward— пакеты, которые надо пропустить
 Таблицы:
   * filter— фильтрация трафика
   * nat— для nat'овских преобразований
   * mangle— для манглинга пакетов
   * security— изменение маркировок безопасности
   * raw— действия с пакетами до обработки conntrack
   * rawpost— подмена исходного трафика без использования информации о соединении
2. опишите процесс обработки пакета который предназначен данной системе
	Пакет поступает на систему, затем попадает в цепочку INPUT, там происходят все процессы с этимм пакетом, которые необходимо провернуть, пакет потенциально куда-то уходит дальше. Перед этим еще также проверяются pre\post-роутинговые эвенты

3. что такое conntrack и для чего используется?
 conntrack отслеживает все логические сетевые соединения, чтобы идентифицировать пакеты из одного потока для дальнейшего использования их вместе

4. какими командами создать/удалить цепочку? создать/удалить правило? создать правило до определенного правила в цепочке?
 - Создать цепочку: iptables -N NEWCHAIN
 - Удалить цепочку: iptables -X NEWCHAIN
 - Создать правило: iptables -A NEWCHAIN [args]
 - До конкретного: iptables -I NEWCHAIN [N] [args]
 - Удалить правило: iptables -D NEWCHAIN
 
 ***
 Практика:
 взять за основу конфигурационный файл iptables и поднять в системе ssh сервер.
***
```
Поднят ssh сервер:
iptables-restore chelgu_iptables
systemctl start ssh
```
***
1 настроить правила которые разрешают доступ на этот сервер с определенной подсети или хоста в которой находитесь вы как клиент, продемонстрировать что работает icmp
***
```
iptables -I INPUT -s 192.168.11.1 -j ACCEPT
```
![dem1](dem1.PNG?raw=true)
***
2 затем закрыть доступ из этой подсети по icmp, осавив доступ по ssh, продемонстрировать что хост по ssh доступен а icmp нет
***
```
iptables -I INPUT -s 192.168.11.1 -j DROP
iptables -I INPUT -s 192.168.11.1 -p tcp --dport 22 -j ACCEPT
```
![dem2](dem2.PNG?raw=true)
***
3 Запретить только ssh , продемонстрировать что icmp работает
***
```
iptables -I INPUT -s 192.168.11.1 -p tcp --dport 22 -j DROP
```
![dem3](dem3.PNG?raw=true)
